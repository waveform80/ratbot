<foo metal:use-macro="view.layout">
<div tal:omit-tag="True" metal:fill-slot="title">Comics</div>
<div tal:omit-tag="True" metal:fill-slot="content">
  <header class="spaced">
    <div metal:use-macro="view.nav_bar"></div>
  </header>

  <section tal:repeat="(index, data) enumerate(comics)" id="comics">
    <div class="row" tal:condition="index != 0">
      <div class="small-12 columns">
        <hr />
      </div>
    </div>
    <div class="row"
        tal:define="comic data[0]; issue data[1]; page data[2]"
        tal:condition="issue or has_permission(Permission.view_unpublished) or comic.author is request.user">
      <div class="small-3 large-3 columns">
        <a href="${request.route_url('issues', comic=comic.id)}">
          <img tal:condition="issue" src="${request.route_url('page_thumb', comic=comic.id, issue=issue, page=page)}" />
          <img tal:condition="not issue" src="${request.static_url('ratbot:static/unpublished.opt.svg')}" />
        </a>
      </div>
      <div class="small-9 large-6 columns">
        <a href="${request.route_url('issues', comic=comic.id)}"><h2>${comic.title}</h2></a>
        ${markup.render(comic.markup, comic.description)}
      </div>
      <div class="large-3 columns"></div>
    </div>
  </section>

  <br />
</div>
</foo>

